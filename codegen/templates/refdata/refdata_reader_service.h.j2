{#
  // codegen-metadata
  // output_path: services/RefData/RefDataReader/src/refdata_reader_service.h
#}
// THIS FILE IS AUTO-GENERATED BY THE CODE-GEN SCRIPT. DO NOT EDIT.
// Contains gRPC service class for Reference Data Reader.

#pragma once

#include <ARQUtils/error.h>
#include <ARQCore/refdata_source.h>

#include <proto_gen/refdata_protobuf.grpc.pb.h>

namespace ARQ
{
namespace Grpc
{
namespace RefData
{

class RefDataReaderServiceImpl final : public RefDataReader::Service
{
public:
    RefDataReaderServiceImpl( std::shared_ptr<RefDataSource> rdSource )
        : m_rdSource( std::move( rdSource ) )
    {
        if( !m_rdSource )
            throw ARQException( "RefDataReaderServiceImpl requires a valid RefDataSource instance" );
    }

    {% for entity in entities %}
    // --- Methods for {{ entity.name }} ({{ entity.type_string }}) ---
    grpc::Status Get{{ entity.name_plural }}( grpc::ServerContext* context, const Get{{ entity.name_plural }}Request* request, Get{{ entity.name_plural }}Response* response ) override;
    grpc::Status Get{{ entity.name }}( grpc::ServerContext* context, const Get{{ entity.name }}Request* request, Get{{ entity.name }}Response* response ) override;

    {% endfor %}
private:
    // For now, just read from the one data source (TODO: Have tiered data sources)
    std::shared_ptr<RefDataSource> m_rdSource;
};

}
}
}