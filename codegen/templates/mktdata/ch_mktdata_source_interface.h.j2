{#
  // codegen-metadata
  // output_path: ARQLib/ARQClickHouse/inc/ch_mktdata_source_interface.h
#}
// THIS FILE IS AUTO-GENERATED BY THE CODE-GEN SCRIPT. DO NOT EDIT.
// Defines the interface for a ClickHouse Market Data source.

#pragma once
#include <ARQClickHouse/dll.h>

#include <ARQCore/mktdata_entities.h>
#include <ARQCore/mktdata_source_interface.h>

namespace ARQ
{

class CHMktDataSource : public IMktDataSource
{
public:
	CHMktDataSource( const std::string_view dsh )
        : m_dsh( dsh )
    {}

    {% for entity in entities %}
    // --- Methods for {{ entity.name }} ({{ entity.type_string }}) ---
    [[nodiscard]] ARQClickHouse_API std::vector<MDEntities::{{ entity.name }}> fetch{{ entity.name_plural }}( const std::string_view mktName ) override;
    [[nodiscard]] ARQClickHouse_API std::optional<MDEntities::{{ entity.name }}> fetch{{ entity.name }}( const std::string_view mktName, const std::string_view ID ) override;
    ARQClickHouse_API void insert{{ entity.name_plural }}( const std::vector<MDEntities::{{ entity.name }}>& data, const std::string_view mktName ) override;

    {% endfor %}
private:
    std::string m_dsh;
};

}